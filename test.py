import streamlit as st

# ----------------------------
# 기본 설정
# ----------------------------
st.set_page_config(page_title="보건의료 웹앱", page_icon="🧑‍⚕️", layout="wide")
st.title("🧑‍⚕️ 전문 보건의료 웹앱")
st.write("""
⚠️ 본 앱은 의료 전문가의 진료를 대체하지 않습니다.  
정확한 진단이나 처치가 필요할 경우 반드시 병원 방문을 권장합니다.
""")

# ----------------------------
# 메뉴 선택
# ----------------------------
menu = st.sidebar.radio("메뉴 선택", ["홈", "자가진단", "운동 가이드", "약품 정보", "응급처치"])

# ----------------------------
# 홈
# ----------------------------
if menu == "홈":
    st.subheader("🏠 홈")
    st.write("""
본 앱은 자가 증상 확인, 재활 운동, 약품 정보, 응급처치 안내 등
건강 관리 보조 기능을 제공합니다.  
사용자의 안전과 정확한 진료를 위해 전문가 상담이 필수입니다.
""")

# ----------------------------
# 자가진단 + 추천 운동/약품 (아코디언 적용)
# ----------------------------
elif menu == "자가진단":
    st.subheader("🤒 자가진단 도구")
    st.write("현재 겪고 있는 증상을 선택하세요:")

    symptom = st.selectbox("증상 선택", [
        "선택 안 함", "두통", "기침", "복통", "발열", "피로감", "발목통증", "눈충혈"
    ])

    if symptom != "선택 안 함":
        st.write(f"선택한 증상: **{symptom}**")

        # 증상 상세 정보
        symptom_detail = {
            "두통": """
- 원인: 긴장성 두통, 편두통, 스트레스, 수면 부족 등
- 동반 증상: 눈 피로, 목/어깨 근육 긴장, 빛과 소리에 민감
- 조치: 충분한 수분 섭취, 규칙적인 휴식, 진통제 복용 가능
- 주의: 갑작스럽거나 심한 두통, 시야 이상, 구토 동반 시 즉시 진료
""",
            "기침": """
- 원인: 감기, 기관지염, 알레르기, 천식
- 동반 증상: 가래, 목 통증, 발열, 호흡곤란
- 조치: 충분한 수분 섭취, 습도 유지, 기침 완화제 사용 가능
- 주의: 2주 이상 지속, 피 섞인 가래, 호흡곤란 시 진료 필요
""",
            "복통": """
- 원인: 소화불량, 위염, 장염, 과민성 장증후군
- 동반 증상: 구역, 구토, 설사, 발열
- 조치: 가벼운 식사, 수분 섭취, 소화제 복용 가능
- 주의: 복부 극심 통증, 혈변, 고열 시 즉시 내과 진료
""",
            "발열": """
- 원인: 바이러스/세균 감염
- 동반 증상: 오한, 근육통, 피로, 두통
- 조치: 충분한 휴식, 수분 섭취, 필요 시 해열제 사용
- 주의: 38℃ 이상 지속, 호흡곤란, 의식 저하 시 즉시 진료
""",
            "피로감": """
- 원인: 과로, 수면 부족, 빈혈, 영양 부족
- 동반 증상: 무기력, 집중력 저하, 어지러움
- 조치: 충분한 수면, 균형 잡힌 식사, 규칙적 운동
- 주의: 2주 이상 지속, 호흡곤란, 빈혈 의심 시 전문 진료
""",
            "발목통증": """
- 원인: 발목 염좌, 근육 손상, 인대 손상
- 동반 증상: 부종, 멍, 보행 시 통증
- 조치: RICE(휴식, 얼음찜질, 압박, 올리기), 보조기 착용
- 주의: 체중 부하 시 통증 심하면 정형외과 진료
""",
            "눈충혈": """
- 원인: 결막염, 알레르기, 안구 건조
- 동반 증상: 가려움, 눈물, 통증, 시야 흐림
- 조치: 인공눈물 사용, 눈 비비지 않기, 원인 회피
- 주의: 통증 심하거나 시력 저하 시 안과 진료
"""
        }

        # 증상 상세 아코디언
        with st.expander("증상 상세 정보"):
            st.info(symptom_detail[symptom])

        # 추천 운동 아코디언
        symptom_exercise = {
            "두통": "목 스트레칭, 어깨/목 근육 이완 운동, 가벼운 산책",
            "기침": "폐활량 늘리기 위한 심호흡 운동, 가벼운 스트레칭",
            "복통": "복부 마사지, 가벼운 복부 스트레칭, 요가 자세",
            "발열": "휴식 중심, 무리한 운동 금지",
            "피로감": "전신 스트레칭, 가벼운 걷기, 목/어깨 근육 풀기",
            "발목통증": "발목 돌리기, 발목 밴드 운동, 염좌 예방 운동",
            "눈충혈": "눈 깜박임 운동, 시선 좌우/상하 이동, 눈 피로 완화 스트레칭"
        }

        with st.expander("추천 운동"):
            st.write(symptom_exercise.get(symptom, "정보 없음"))

        # 추천 약품 아코디언
        symptom_drug = {
            "두통": ["타이레놀", "이부프로펜", "진통제"],
            "기침": ["진해거담제", "항히스타민제"],
            "복통": ["판토덱스", "소염제", "진통제"],
            "발열": ["타이레놀", "해열제"],
            "피로감": ["비타민제", "진정제"],
            "발목통증": ["이부프로펜", "소염제", "진통제"],
            "눈충혈": ["항히스타민제", "인공눈물"]
        }

        drug_info = {
            "타이레놀": {"효능": "해열, 진통", "부작용": "간 손상 위험 (과다 복용 시)"},
            "이부프로펜": {"효능": "진통, 항염", "부작용": "위장 장애, 어지러움"},
            "진통제": {"효능": "통증 완화", "부작용": "위장 장애, 어지러움"},
            "진해거담제": {"효능": "기침 완화", "부작용": "졸림, 어지러움"},
            "항히스타민제": {"효능": "알레르기 증상 완화", "부작용": "졸림, 구강 건조"},
            "판토덱스": {"효능": "위산 억제제", "부작용": "두통, 복통"},
            "소염제": {"효능": "염증 완화", "부작용": "위장 장애, 발진"},
            "해열제": {"효능": "발열 감소", "부작용": "위장 장애, 두통"},
            "비타민제": {"효능": "영양 보충", "부작용": "과다 섭취 시 위장장애"},
            "인공눈물": {"효능": "눈 건조 완화", "부작용": "일시적 눈 따가움"}
        }

        with st.expander("추천 약품"):
            cols = st.columns(3)
            for i, drug in enumerate(symptom_drug.get(symptom, [])):
                if cols[i % 3].button(drug):
                    info = drug_info[drug]
                    st.success(f"💊 {drug} 정보")
                    st.write(f"**효능:** {info['효능']}")
                    st.write(f"**부작용:** {info['부작용']}")
