import streamlit as st

# ----------------------------
# 기본 설정
# ----------------------------
st.set_page_config(page_title="보건의료 웹앱", page_icon="🧑‍⚕️", layout="wide")
st.title("🧑‍⚕️ 전문 보건의료 웹앱")
st.write("""
⚠️ 본 앱은 의료 전문가의 진료를 대체하지 않습니다.  
정확한 진단이나 처치가 필요할 경우 반드시 병원 방문을 권장합니다.
""")

# ----------------------------
# 메뉴 선택
# ----------------------------
menu = st.sidebar.radio("메뉴 선택", ["홈", "자가진단", "운동 가이드", "약품 정보", "응급처치"])

# ----------------------------
# 홈
# ----------------------------
if menu == "홈":
    st.subheader("🏠 홈")
    st.write("""
본 앱은 자가 증상 확인, 재활 운동, 약품 정보, 응급처치 안내 등
건강 관리 보조 기능을 제공합니다.  
사용자의 안전과 정확한 진료를 위해 전문가 상담이 필수입니다.
""")

# ----------------------------
# 자가진단
# ----------------------------
elif menu == "자가진단":
    st.subheader("🤒 자가진단 도구")
    st.write("현재 겪고 있는 증상을 선택하세요:")

    symptom = st.selectbox("증상 선택", [
        "선택 안 함", "두통", "기침", "복통", "발열", "피로감", "발목통증", "눈충혈"
    ])

    if symptom != "선택 안 함":
        st.write(f"선택한 증상: **{symptom}**")
        symptom_guide = {
            "두통": "긴장성 두통 가능성. 충분한 수면과 수분 섭취가 필요합니다.",
            "기침": "감기, 기관지염 가능. 2주 이상 지속되면 진료 권장.",
            "복통": "소화불량, 위염, 장염 가능. 지속 시 내과 진료 권장.",
            "발열": "감염 가능성. 38℃ 이상 지속 시 병원 방문 필요.",
            "피로감": "과로, 수면 부족, 빈혈 가능. 생활습관 점검 필요.",
            "발목통증": "발목 염좌 가능성. 통증 심하면 진료 권장.",
            "눈충혈": "결막염, 알레르기 가능. 증상 심하면 안과 진료 권장."
        }
        st.info(symptom_guide.get(symptom, "정확한 진단은 병원에서 필요합니다."))

# ----------------------------
# 운동 & 재활 가이드
# ----------------------------
elif menu == "운동 가이드":
    st.subheader("💪 재활 운동 가이드")
    exercise = st.selectbox("운동 부위 선택", ["어깨", "허리", "발목", "목"])

    exercise_guide = {
        "어깨": ("벽에 손을 대고 팔을 천천히 위로 올립니다.", "https://www.youtube.com/watch?v=4BOTvaRaDjI"),
        "허리": ("무릎을 가슴 쪽으로 당겨 20초 유지하세요.", "https://www.youtube.com/watch?v=2pLT-olgUJs"),
        "발목": ("밴드를 이용해 발목 외번/내번 운동 15회 반복.", "https://www.youtube.com/watch?v=Eys2RTh9agk"),
        "목": ("고개를 좌우로 천천히 기울여 근육 이완.", "https://www.youtube.com/watch?v=R9sTBIcixWY")
    }

    desc, link = exercise_guide[exercise]
    st.write(f"✅ 운동 방법: {desc}")
    st.markdown(f"[영상 보기]({link})")

# ----------------------------
# 약품 정보 (버튼 클릭)
# ----------------------------
elif menu == "약품 정보":
    st.subheader("💊 약품 정보 (클릭하여 확인)")
    
    drug_info = {
        "타이레놀": {"효능": "해열, 진통", "부작용": "간 손상 위험 (과다 복용 시)"},
        "아스피린": {"효능": "해열, 진통, 항염", "부작용": "위장 장애, 출혈 위험"},
        "판토덱스": {"효능": "위산 억제제", "부작용": "두통, 복통"},
        "이부프로펜": {"효능": "진통, 항염", "부작용": "위장 장애, 어지러움"},
        "항히스타민제": {"효능": "알레르기 증상 완화", "부작용": "졸림, 구강 건조"},
        "항생제": {"효능": "세균 감염 치료", "부작용": "설사, 발진"},
        "진해거담제": {"효능": "기침 완화", "부작용": "졸림, 어지러움"},
        "해열제": {"효능": "발열 감소", "부작용": "위장 장애, 두통"},
        "진통제": {"효능": "통증 완화", "부작용": "위장 장애, 어지러움"},
        "소염제": {"효능": "염증 완화", "부작용": "위장 장애, 발진"},
        "항진균제": {"효능": "곰팡이 감염 치료", "부작용": "간 기능 이상"},
        "항바이러스제": {"효능": "바이러스 감염 치료", "부작용": "발진, 발열"},
        "항우울제": {"효능": "우울증 치료", "부작용": "졸림, 체중 증가"},
        "항불안제": {"효능": "불안 증상 완화", "부작용": "졸림, 어지러움"},
        "항고혈압제": {"효능": "혈압 감소", "부작용": "어지러움, 피로감"},
        "항당뇨제": {"효능": "혈당 감소", "부작용": "저혈당, 체중 증가"},
        "항콜레스테롤제": {"효능": "콜레스테롤 감소", "부작용": "근육통, 피로감"},
        "항암제": {"효능": "암 치료", "부작용": "탈모, 구토"},
        "진정제": {"효능": "불안 완화", "부작용": "졸림, 어지러움"},
        "항경련제": {"효능": "발작 예방", "부작용": "어지러움, 졸림"}
    }

    cols = st.columns(5)
    for i, drug in enumerate(drug_info.keys()):
        if cols[i % 5].button(drug):
            info = drug_info[drug]
            st.success(f"💊 {drug} 정보")
            st.write(f"**효능:** {info['효능']}")
            st.write(f"**부작용:** {info['부작용']}")

# ----------------------------
# 응급처치
# ----------------------------
elif menu == "응급처치":
    st.subheader("🚑 응급처치 가이드")
    emergency = st.selectbox("상황 선택", [
        "심정지", "화상", "골절", "출혈",
        "알레르기 반응", "식중독", "뇌졸중 의심", "심장마비 의심"
    ])

    emergency_guide = {
        "심정지": ("즉시 119 신고 후 CPR 실시 (가슴압박 30회 + 인공호흡 2회 반복)", "https://www.youtube.com/watch?v=2pw8xNL1vOA"),
        "화상": ("화상 부위를 흐르는 찬물에 10~20분 식히세요. 얼음 사용 금지", ""),
        "골절": ("골절 부위를 고정하고 얼음찜질 후 병원 이동", ""),
        "출혈": ("출혈 부위를 깨끗한 천으로 압박. 심하면 지혈대 사용", ""),
        "알레르기 반응": ("호흡곤란, 발진, 부종 시 119 신고 후 항히스타민제 복용", ""),
        "식중독": ("구토, 설사, 복통 시 수분 보충. 증상 심하면 병원 방문", ""),
        "뇌졸중 의심": ("얼굴 비대칭, 팔 저림, 언어장애 시 즉시 119 신고", ""),
        "심장마비 의심": ("가슴 통증, 호흡곤란 시 즉시 119 신고 및 CPR 실시", "")
    }

    desc, link = emergency_guide[emergency]
    st.write(f"⚠️ 처치 방법: {desc}")
    if link:
        st.markdown(f"[참고 영상]({link})")
